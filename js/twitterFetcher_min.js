/*********************************************************************
*  #### Twitter Post Fetcher v11.0 ####
*  Coded by Jason Mayes 2013. A present to all the developers out there.
*  www.jasonmayes.com
*  Please keep this disclaimer with my code if you use it. Thanks. :-)
*  Got feedback or questions, ask here:
*  http://www.jasonmayes.com/projects/twitterApi/
*  Github: https://github.com/jasonmayes/Twitter-Post-Fetcher
*  Updates will be posted to this site.
*********************************************************************/
var twitterFetcher=function(){function e(e){if(null==h){for(var t=e.length,n=0,a=document.getElementById(s),i="<ul>";t>n;)i+="<li>"+e[n]+"</li>",n++;i+="</ul>",a.innerHTML=i}else h(e)}function t(e){return e.replace(/<b[^>]*>(.*?)<\/b>/gi,function(e,t){return t}).replace(/class=".*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,"")}function n(e,t){for(var n=[],s=new RegExp("(^| )"+t+"( |$)"),a=e.getElementsByTagName("*"),i=0,l=a.length;l>i;i++)s.test(a[i].className)&&n.push(a[i]);return n}var s="",a=20,i=!0,l=[],r=!1,c=!0,o=!0,p=null,u=!0,d=!0,h=null,m=!0;return{fetch:function(e){if(void 0===e.maxTweets&&(e.maxTweets=20),void 0===e.enableLinks&&(e.enableLinks=!0),void 0===e.showUser&&(e.showUser=!0),void 0===e.showTime&&(e.showTime=!0),void 0===e.dateFunction&&(e.dateFunction="default"),void 0===e.showRetweet&&(e.showRetweet=!0),void 0===e.customCallback&&(e.customCallback=null),void 0===e.showInteraction&&(e.showInteraction=!0),r)l.push(e);else{r=!0,s=e.domId,a=e.maxTweets,i=e.enableLinks,o=e.showUser,c=e.showTime,d=e.showRetweet,p=e.dateFunction,h=e.customCallback,m=e.showInteraction;var t=document.createElement("script");t.type="text/javascript",t.src="//cdn.syndication.twimg.com/widgets/timelines/"+e.id+"?&lang="+e.lang+"&callback=twitterFetcher.callback&suppress_response_codes=true&rnd="+Math.random(),document.getElementsByTagName("head")[0].appendChild(t)}},callback:function(s){var h=document.createElement("div");h.innerHTML=s.body,"undefined"==typeof h.getElementsByClassName&&(u=!1);var w=[],g=[],f=[],v=[],b=[],y=0;if(u)for(var T=h.getElementsByClassName("tweet");y<T.length;)v.push(T[y].getElementsByClassName("retweet-credit").length>0?!0:!1),(!v[y]||v[y]&&d)&&(w.push(T[y].getElementsByClassName("e-entry-title")[0]),b.push(T[y].getAttribute("data-tweet-id")),g.push(T[y].getElementsByClassName("p-author")[0]),f.push(T[y].getElementsByClassName("dt-updated")[0])),y++;else for(var T=n(h,"tweet");y<T.length;)w.push(n(T[y],"e-entry-title")[0]),b.push(T[y].getAttribute("data-tweet-id")),g.push(n(T[y],"p-author")[0]),f.push(n(T[y],"dt-updated")[0]),v.push(n(T[y],"retweet-credit").length>0?!0:!1),y++;w.length>a&&(w.splice(a,w.length-a),g.splice(a,g.length-a),f.splice(a,f.length-a),v.splice(a,v.length-a));for(var x=[],y=w.length,C=0;y>C;){if("string"!=typeof p){var E=new Date(f[C].getAttribute("datetime").replace(/-/g,"/").replace("T"," ").split("+")[0]),_=p(E);if(f[C].setAttribute("aria-label",_),w[C].innerText)if(u)f[C].innerText=_;else{var N=document.createElement("p"),k=document.createTextNode(_);N.appendChild(k),N.setAttribute("aria-label",_),f[C]=N}else f[C].textContent=_}var B="";i?(o&&(B+='<div class="user">'+t(g[C].innerHTML)+"</div>"),B+='<p class="tweet">'+t(w[C].innerHTML)+"</p>",c&&(B+='<p class="timePosted">'+f[C].getAttribute("aria-label")+"</p>")):w[C].innerText?(o&&(B+='<p class="user">'+g[C].innerText+"</p>"),B+='<p class="tweet">'+w[C].innerText+"</p>",c&&(B+='<p class="timePosted">'+f[C].innerText+"</p>")):(o&&(B+='<p class="user">'+g[C].textContent+"</p>"),B+='<p class="tweet">'+w[C].textContent+"</p>",c&&(B+='<p class="timePosted">'+f[C].textContent+"</p>")),m&&(B+='<p class="interact"><a href="https://twitter.com/intent/tweet?in_reply_to='+b[C]+'" class="twitter_reply_icon">Reply</a><a href="https://twitter.com/intent/retweet?tweet_id='+b[C]+'" class="twitter_retweet_icon">Retweet</a><a href="https://twitter.com/intent/favorite?tweet_id='+b[C]+'" class="twitter_fav_icon">Favorite</a></p>'),x.push(B),C++}e(x),r=!1,l.length>0&&(twitterFetcher.fetch(l[0]),l.splice(0,1))}}}();
